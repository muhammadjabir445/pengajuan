(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{261:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),o=n(0),r=n(7);function s(e,t,n,i,c,o,r){try{var s=e[o](r),a=s.value}catch(e){return void n(e)}s.done?t(a):Promise.resolve(a).then(i,c)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l,h,d={data:function(){return{menus:[],parentMenu:[],role:"",childMenu:[],checkbox:!1,loading:!1}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.b)({setSnakbar:"snakbar/setSnakbar",setAuth:"auth/setAuth"}),{show:function(e){var t=this.menus.find((function(t,n){return n===e}));t.show=0==t.show,this.menus.splice(e,1,t)},chekParent:function(e){var t=this.menus.find((function(t,n){return n===e}));if(!1===t.checkbox){var n=this.parentMenu.indexOf(t.id);this.parentMenu.splice(n,1)}else this.parentMenu.push(t.id)},chekChild:function(e,t){var n=this.menus.find((function(t,n){return n===e})).child.find((function(e,n){return n===t}));if(!1===n.checkbox){var i=this.childMenu.indexOf(n.id);this.childMenu.splice(i,1)}else this.childMenu.push(n.id)},save:(l=c.a.mark((function e(){var t,n,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,t=(t=window.location.pathname).split("/"),(n=new FormData).append("id_role",t[2]),n.append("parent_menu",JSON.stringify(this.parentMenu)),n.append("child_menu",JSON.stringify(this.childMenu)),t=t[1],e.next=10,this.axios.post(t,n,this.config).then((function(e){i.setSnakbar({pesan:e.data.message,color_snakbar:"success",status:!0}),i.me()})).catch((function(e){console.log(e.response)}));case 10:this.loading=!1;case 11:case"end":return e.stop()}}),e,this)})),h=function(){var e=this,t=arguments;return new Promise((function(n,i){var c=l.apply(e,t);function o(e){s(c,n,i,o,r,"next",e)}function r(e){s(c,n,i,o,r,"throw",e)}o(void 0)}))},function(){return h.apply(this,arguments)}),me:function(){var e=this;this.axios.get("/me",this.config).then((function(t){e.setAuth({menu:t.data.menu,user:t.data.user,token:t.data.access_token})})).catch((function(e){return console.log(e.response)}))},chekAll:function(){var e=this;this.parentMenu=[],this.childMenu=[],this.menus.forEach((function(t){t.checkbox=!!e.checkbox,e.checkbox&&e.parentMenu.push(t.id),t.child.forEach((function(t){t.checkbox=!!e.checkbox,e.checkbox&&e.childMenu.push(t.id)}))}))},go:function(){var e=this,t=window.location.pathname;this.axios.get(t,this.config).then((function(t){console.log(t),e.parentMenu=t.data.role_menu?t.data.role_menu.parent:[],e.childMenu=t.data.role_menu?t.data.role_menu.child:[],e.role=t.data.role,t.data.menu.forEach((function(t){var n=[],i=!!e.parentMenu.find((function(e){return e===t.id}));1===t.status_child&&t.child_menu.forEach((function(t){var i=!!e.childMenu.find((function(e){return e===t.id}));n.push({id:t.id,description:t.description,checkbox:i})}));var c={description:t.description,id:t.id,show:!0,child:n,checkbox:i};e.menus.push(c)}))})).catch((function(e){console.log(e.response)}))}}),created:function(){this.go()},mixins:[r.a]},v=n(2),f=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-container",[n("BtnJudul",{attrs:{text:e.role}}),e._v(" "),n("v-card",{style:e.border,attrs:{tile:""}},[n("v-card-text",[n("v-card",{staticClass:"mx-auto",attrs:{outlined:""}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[e._v("Menu")])],1),e._v(" "),n("v-list-item-action",[n("v-checkbox",{on:{change:function(t){return e.chekAll()}},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}})],1),e._v(" "),n("v-btn",{staticClass:"mr-3",attrs:{color:"success",loading:e.loading,small:"",tile:""},on:{click:function(t){return e.save()}}},[e._v("Simpan")]),e._v(" "),n("v-btn",{attrs:{color:"primary",to:"/menu",small:"",tile:""}},[e._v("\n                                Menu Management\n                        ")])],1),e._v(" "),n("v-card-text",e._l(e.menus,(function(t,i){return n("v-card",{key:i,staticClass:"mt-4"},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.description))])],1),e._v(" "),n("v-list-item-action",[n("v-checkbox",{on:{change:function(t){return e.chekParent(i)}},model:{value:t.checkbox,callback:function(n){e.$set(t,"checkbox",n)},expression:"menu.checkbox"}})],1),e._v(" "),n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.show(i)}}},[n("v-icon",[e._v(e._s(t.show?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1),e._v(" "),n("v-divider"),e._v(" "),t.show&&t.child.length>0?n("v-card-text",[e._l(t.child,(function(t,c){return n("v-list-item",{key:c},[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.description))])],1),e._v(" "),n("v-list-item-action",[n("v-checkbox",{on:{change:function(t){return e.chekChild(i,c)}},model:{value:t.checkbox,callback:function(n){e.$set(t,"checkbox",n)},expression:"child.checkbox"}})],1)],1)})),e._v(" "),n("v-divider")],2):e._e()],1)})),1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=f.exports}}]);